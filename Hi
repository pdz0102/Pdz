                        local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Cấu hình
local autoBlockDistance = 20 -- studs
local blocking = false

-- Hàm bật/tắt block
local function setBlock(state)
	if state and not blocking then
		blocking = true
		print("AutoBlock ON")
		-- chạy animation / bật shield ở đây
	elseif not state and blocking then
		blocking = false
		print("AutoBlock OFF")
		-- tắt animation / shield
	end
end

-- Sự kiện khi killer dùng skill (giả sử server phát sự kiện này)
local killerSkillEvent = ReplicatedStorage:WaitForChild("KillerSkillEvent")

killerSkillEvent.OnClientEvent:Connect(function(killer)
	if killer and killer:FindFirstChild("HumanoidRootPart") and character:FindFirstChild("HumanoidRootPart") then
		local dist = (killer.HumanoidRootPart.Position - character.HumanoidRootPart.Position).Magnitude
		if dist <= autoBlockDistance then
			-- Killer chuẩn bị skill trong phạm vi -> auto block
			setBlock(true)
			-- Sau 2 giây thì tắt block (hoặc theo thời gian skill)
			task.delay(2, function()
				setBlock(false)
			end)
		end
	end
end)
